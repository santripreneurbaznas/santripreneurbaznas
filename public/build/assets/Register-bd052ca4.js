import{r as h,G as D,a as t,j as e,S as I,F as B,c as b}from"./app-dc42d8cc.js";import{A as G}from"./AuthenticatedLayout-4d885bb5.js";import{t as g}from"./index-1915575b.js";import{d as k}from"./debounce-60321a07.js";import"./Toater-1904a21a.js";import"./index-6dc85663.js";function V({competition:f,categories:N,errors:r}){const[w,C]=h.useState([]),[A,F]=h.useState([]),[P,_]=h.useState([]),[$,x]=h.useState([]),[d,c]=h.useState({provinces:!1,regencies:!1,districts:!1,villages:!1}),[o,m]=h.useState({provinces:null,regencies:null,districts:null,villages:null}),{data:n,setData:s,post:R,processing:v}=D({competition_id:f.id,category_id:"",place_of_birth:"",date_of_birth:"",gender:"",address:"",province:"",kabupaten:"",kecamatan:"",kelurahan:"",boarding_school_name:"",motivation:"",estimated_monthly_income:"",number_wa:"",business_proposal_file:null,mustahik_certificate_file:null,pesantren_certificate_file:null});h.useEffect(()=>{(async()=>{c(l=>({...l,provinces:!0})),m(l=>({...l,provinces:null}));try{const l=await b.get("/api/wilayah/provinces");C(l.data)}catch(l){console.error("Error fetching provinces:",l),m(u=>({...u,provinces:"Gagal memuat data provinsi"})),g.error("Gagal memuat data provinsi")}finally{c(l=>({...l,provinces:!1}))}})()},[]);const K=k(async a=>{const l=a.target.value,u=a.target.options[a.target.selectedIndex].text;if(s("province",u),s("kabupaten",""),s("kecamatan",""),s("kelurahan",""),l){c(i=>({...i,regencies:!0})),m(i=>({...i,regencies:null}));try{const i=await b.get(`/api/wilayah/regencies/${l}`);F(i.data)}catch(i){console.error("Error fetching regencies:",i),m(p=>({...p,regencies:"Gagal memuat data kabupaten"})),g.error("Gagal memuat data kabupaten")}finally{c(i=>({...i,regencies:!1}))}}_([]),x([])},300),L=k(async a=>{const l=a.target.value,u=a.target.options[a.target.selectedIndex].text;if(s("kabupaten",u),s("kecamatan",""),s("kelurahan",""),l){c(i=>({...i,districts:!0})),m(i=>({...i,districts:null}));try{const i=await b.get(`/api/wilayah/districts/${l}`);_(i.data)}catch(i){console.error("Error fetching districts:",i),m(p=>({...p,districts:"Gagal memuat data kecamatan"})),g.error("Gagal memuat data kecamatan")}finally{c(i=>({...i,districts:!1}))}}x([])},300),S=k(async a=>{const l=a.target.value,u=a.target.options[a.target.selectedIndex].text;if(s("kecamatan",u),s("kelurahan",""),l){c(i=>({...i,villages:!0})),m(i=>({...i,villages:null}));try{const i=await b.get(`/api/wilayah/villages/${l}`);x(i.data)}catch(i){console.error("Error fetching villages:",i),m(p=>({...p,villages:"Gagal memuat data kelurahan"})),g.error("Gagal memuat data kelurahan")}finally{c(i=>({...i,villages:!1}))}}},300),M=a=>{const l=a.target.options[a.target.selectedIndex].text;s("kelurahan",l)},q=a=>{(n.business_proposal_file==null||n.mustahik_certificate_file==null||n.pesantren_certificate_file==null)&&g.error("File harus diisi"),a.preventDefault(),R(route("user.registrations.store"),{forceFormData:!0})},y=a=>l=>{s(a,l.target.files[0])};return t(G,{children:[e(I,{title:`Pendaftaran ${f.name}`}),e("div",{className:" bg-gray-50 min-h-screen",children:e("div",{className:"",children:e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:t("div",{className:"",children:[t("div",{className:"mb-8 text-center",children:[e("h1",{className:"text-2xl font-bold  mb-2 text-[#4CAF50]",children:f.name}),e("p",{className:"text-gray-600",children:"Silakan lengkapi data berikut untuk mendaftar kompetisi"})]}),t("form",{onSubmit:q,className:"space-y-6",children:[e("input",{type:"hidden",name:"competition_id",value:f.id}),t("div",{className:"space-y-2",children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Kategori Kompetisi"," ",e("span",{className:"text-red-500",children:"*"})]}),t("select",{name:"category_id",value:n.category_id,onChange:a=>s("category_id",a.target.value),className:`mt-1 block w-full rounded-md border ${r.category_id?"border-red-300":"border-gray-300"} shadow-sm focus:border-[#4CAF50] focus:ring focus:ring-[#4CAF50] focus:ring-opacity-50`,required:!0,children:[e("option",{value:"",children:"-- Pilih Kategori --"}),N.map(a=>e("option",{value:a.id,children:a.name},a.id))]}),r.category_id&&e("p",{className:"mt-1 text-sm text-red-600",children:r.category_id})]}),t("div",{className:"border-t border-gray-200 pt-6",children:[e("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informasi Pribadi"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Tempat Lahir"," ",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"text",name:"place_of_birth",value:n.place_of_birth,onChange:a=>s("place_of_birth",a.target.value),className:`mt-1 block w-full rounded-md border ${r.place_of_birth?"border-red-300":"border-gray-300"} shadow-sm focus:border-[#4CAF50] focus:ring focus:ring-[#4CAF50] focus:ring-opacity-50`,required:!0}),r.place_of_birth&&e("p",{className:"mt-1 text-sm text-red-600",children:r.place_of_birth})]}),t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Tanggal Lahir"," ",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"date",name:"date_of_birth",value:n.date_of_birth,onChange:a=>s("date_of_birth",a.target.value),className:`mt-1 block w-full rounded-md border ${r.date_of_birth?"border-red-300":"border-gray-300"} shadow-sm focus:border-[#4CAF50] focus:ring focus:ring-[#4CAF50] focus:ring-opacity-50`,required:!0}),r.date_of_birth&&e("p",{className:"mt-1 text-sm text-red-600",children:r.date_of_birth})]}),t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Jenis Kelamin"," ",e("span",{className:"text-red-500",children:"*"})]}),t("select",{name:"gender",value:n.gender,onChange:a=>s("gender",a.target.value),className:`mt-1 block w-full rounded-md border ${r.gender?"border-red-300":"border-gray-300"} shadow-sm focus:border-[#4CAF50] focus:ring focus:ring-[#4CAF50] focus:ring-opacity-50`,required:!0,children:[e("option",{value:"",children:"-- Pilih Jenis Kelamin --"}),e("option",{value:"Laki-laki",children:"Laki-laki"}),e("option",{value:"Perempuan",children:"Perempuan"})]}),r.gender&&e("p",{className:"mt-1 text-sm text-red-600",children:r.gender})]}),t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Nomor WhatsApp"," ",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"text",name:"number_wa",value:n.number_wa,onChange:a=>s("number_wa",a.target.value),className:`mt-1 block w-full rounded-md border ${r.number_wa?"border-red-300":"border-gray-300"} shadow-sm focus:border-[#4CAF50] focus:ring focus:ring-[#4CAF50] focus:ring-opacity-50`,placeholder:"Contoh: 081234567890",required:!0}),r.number_wa&&e("p",{className:"mt-1 text-sm text-red-600",children:r.number_wa})]})]})]}),t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Alamat Lengkap"," ",e("span",{className:"text-red-500",children:"*"})]}),e("textarea",{name:"address",placeholder:"Contoh : Jl.Rusa 1",value:n.address,onChange:a=>s("address",a.target.value),rows:3,className:`mt-1 block w-full rounded-md border ${r.address?"border-red-300":"border-gray-300"} shadow-sm focus:border-[#4CAF50] focus:ring focus:ring-[#4CAF50] focus:ring-opacity-50`,required:!0}),t("p",{className:"mt-1 text-sm text-gray-500",children:["Isi alamat"," ",e("span",{className:"font-bold",children:"tanpa"})," ","menyertakan RT/RW dan kode pos"]}),r.address&&e("p",{className:"mt-1 text-sm text-red-600",children:r.address})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Provinsi"," ",e("span",{className:"text-red-500",children:"*"})]}),t("select",{onChange:a=>{a.persist(),K(a)},disabled:d.provinces,className:`mt-1 block w-full rounded-md border ${r.province?"border-red-300":"border-gray-300"} shadow-sm focus:border-[#4CAF50] focus:ring focus:ring-[#4CAF50] focus:ring-opacity-50 ${d.provinces?"opacity-75 cursor-not-allowed":""}`,required:!0,children:[e("option",{value:"",children:"-- Pilih Provinsi --"}),d.provinces?e("option",{value:"",disabled:!0,children:"Memuat provinsi..."}):o.provinces?e("option",{value:"",disabled:!0,className:"text-red-500",children:o.provinces}):w.map(a=>e("option",{value:a.id,children:a.name},a.id))]}),r.province&&e("p",{className:"mt-1 text-sm text-red-600",children:r.province})]}),t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Kabupaten/Kota"," ",e("span",{className:"text-red-500",children:"*"})]}),t("select",{onChange:a=>{a.persist(),L(a)},disabled:!n.province||d.regencies,className:`mt-1 block w-full rounded-md border ${r.kabupaten?"border-red-300":"border-gray-300"} shadow-sm focus:border-[#4CAF50] focus:ring focus:ring-[#4CAF50] focus:ring-opacity-50 ${!n.province||d.regencies?"bg-gray-100 opacity-75 cursor-not-allowed":""}`,required:!0,children:[e("option",{value:"",children:"-- Pilih Kabupaten/Kota --"}),d.regencies?e("option",{value:"",disabled:!0,children:"Memuat kabupaten..."}):o.regencies?e("option",{value:"",disabled:!0,className:"text-red-500",children:o.regencies}):A.map(a=>e("option",{value:a.id,children:a.name},a.id))]}),r.kabupaten&&e("p",{className:"mt-1 text-sm text-red-600",children:r.kabupaten})]}),t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Kecamatan"," ",e("span",{className:"text-red-500",children:"*"})]}),t("select",{onChange:a=>{a.persist(),S(a)},disabled:!n.kabupaten||d.districts,className:`mt-1 block w-full rounded-md border ${r.kecamatan?"border-red-300":"border-gray-300"} shadow-sm focus:border-[#4CAF50] focus:ring focus:ring-[#4CAF50] focus:ring-opacity-50 ${!n.kabupaten||d.districts?"bg-gray-100 opacity-75 cursor-not-allowed":""}`,required:!0,children:[e("option",{value:"",children:"-- Pilih Kecamatan --"}),d.districts?e("option",{value:"",disabled:!0,children:"Memuat kecamatan..."}):o.districts?e("option",{value:"",disabled:!0,className:"text-red-500",children:o.districts}):P.map(a=>e("option",{value:a.id,children:a.name},a.id))]}),r.kecamatan&&e("p",{className:"mt-1 text-sm text-red-600",children:r.kecamatan})]}),t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Kelurahan/Desa"," ",e("span",{className:"text-red-500",children:"*"})]}),t("select",{onChange:a=>{a.persist(),M(a)},disabled:!n.kecamatan||d.villages,className:`mt-1 block w-full rounded-md border ${r.kelurahan?"border-red-300":"border-gray-300"} shadow-sm focus:border-[#4CAF50] focus:ring focus:ring-[#4CAF50] focus:ring-opacity-50 ${!n.kecamatan||d.villages?"bg-gray-100 opacity-75 cursor-not-allowed":""}`,required:!0,children:[e("option",{value:"",children:"-- Pilih Kelurahan/Desa --"}),d.villages?e("option",{value:"",disabled:!0,children:"Memuat kelurahan..."}):o.villages?e("option",{value:"",disabled:!0,className:"text-red-500",children:o.villages}):$.map(a=>e("option",{value:a.id,children:a.name},a.id))]}),r.kelurahan&&e("p",{className:"mt-1 text-sm text-red-600",children:r.kelurahan})]})]}),t("div",{className:"border-t border-gray-200 pt-6",children:[e("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informasi Pesantren"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Nama Pesantren"," ",e("span",{className:"text-red-500",children:"*"})]}),e("input",{type:"text",name:"boarding_school_name",value:n.boarding_school_name,onChange:a=>s("boarding_school_name",a.target.value),className:`mt-1 block w-full rounded-md border ${r.boarding_school_name?"border-red-300":"border-gray-300"} shadow-sm focus:border-[#4CAF50] focus:ring focus:ring-[#4CAF50] focus:ring-opacity-50`,required:!0}),r.boarding_school_name&&e("p",{className:"mt-1 text-sm text-red-600",children:r.boarding_school_name})]}),t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Perkiraan Penghasilan Bulanan"," ",e("span",{className:"text-red-500",children:"*"})]}),t("select",{name:"estimated_monthly_income",value:n.estimated_monthly_income,onChange:a=>s("estimated_monthly_income",a.target.value),className:`mt-1 block w-full rounded-md border ${r.estimated_monthly_income?"border-red-300":"border-gray-300"} shadow-sm focus:border-[#4CAF50] focus:ring focus:ring-[#4CAF50] focus:ring-opacity-50`,required:!0,children:[e("option",{value:"",children:"-- Pilih Range Penghasilan --"}),e("option",{value:"< Rp 1.000.000",children:"Kurang dari Rp 1.000.000"}),e("option",{value:"Rp 1.000.000 - Rp 3.000.000",children:"Rp 1.000.000 - Rp 3.000.000"}),e("option",{value:"Rp 3.000.000 - Rp 5.000.000",children:"Rp 3.000.000 - Rp 5.000.000"}),e("option",{value:"> Rp 5.000.000",children:"Lebih dari Rp 5.000.000"})]}),r.estimated_monthly_income&&e("p",{className:"mt-1 text-sm text-red-600",children:r.estimated_monthly_income})]})]})]}),t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Motivasi Mengikuti Kompetisi"," ",e("span",{className:"text-red-500",children:"*"})]}),e("textarea",{name:"motivation",value:n.motivation,onChange:a=>s("motivation",a.target.value),rows:4,className:`mt-1 block w-full rounded-md border ${r.motivation?"border-red-300":"border-gray-300"} shadow-sm focus:border-[#4CAF50] focus:ring focus:ring-[#4CAF50] focus:ring-opacity-50`,placeholder:"Jelaskan motivasi Anda mengikuti kompetisi ini (maksimal 500 karakter)",required:!0}),r.motivation&&e("p",{className:"mt-1 text-sm text-red-600",children:r.motivation})]}),t("div",{className:"border-t border-gray-200 pt-6",children:[e("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Upload Dokumen"}),e("p",{className:"text-sm text-gray-500 mb-6",children:"Silakan upload dokumen-dokumen berikut dalam format PDF (maksimal 2MB per file)"}),t("div",{className:"mb-6",children:[t("p",{className:"text-sm text-gray-500 mb-2",children:["Download template dokumen:",e("a",{href:"/files/Berkas-BAZNAS Santripreuner-2025.zip",download:!0,className:"text-green-600 hover:text-green-800 ml-1 underline",children:"Klik di sini"})]}),t("p",{className:"text-sm text-gray-500",children:["Jika perlu kompres PDF:",e("a",{href:"https://www.ilovepdf.com/compress_pdf",target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-800 ml-1 underline",children:"Klik di sini"})]})]}),t("div",{className:"space-y-6",children:[t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Proposal Bisnis"," ",e("span",{className:"text-red-500",children:"*"})]}),e("div",{className:"mt-1 flex items-center",children:t("label",{className:"flex flex-col items-center px-4 py-6 bg-white rounded-lg border border-dashed border-gray-300 cursor-pointer hover:bg-gray-50 transition-colors duration-150",children:[e("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e("span",{className:"mt-2 text-sm text-gray-600",children:n.business_proposal_file?n.business_proposal_file.name:"Pilih File"}),e("input",{type:"file",name:"business_proposal_file",onChange:y("business_proposal_file"),className:"hidden",accept:".pdf"})]})}),r.business_proposal_file&&e("p",{className:"mt-1 text-sm text-red-600",children:r.business_proposal_file})]}),t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Sertifikat Mustahik"," ",e("span",{className:"text-red-500",children:"*"})]}),e("div",{className:"mt-1 flex items-center",children:t("label",{className:"flex flex-col items-center px-4 py-6 bg-white rounded-lg border border-dashed border-gray-300 cursor-pointer hover:bg-gray-50 transition-colors duration-150",children:[e("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e("span",{className:"mt-2 text-sm text-gray-600",children:n.mustahik_certificate_file?n.mustahik_certificate_file.name:"Pilih File"}),e("input",{type:"file",name:"mustahik_certificate_file",onChange:y("mustahik_certificate_file"),className:"hidden",accept:".pdf"})]})}),r.mustahik_certificate_file&&e("p",{className:"mt-1 text-sm text-red-600",children:r.mustahik_certificate_file})]}),t("div",{children:[t("label",{className:"block text-sm font-medium text-gray-700",children:["Sertifikat Pesantren"," ",e("span",{className:"text-red-500",children:"*"})]}),e("div",{className:"mt-1 flex items-center",children:t("label",{className:"flex flex-col items-center px-4 py-6 bg-white rounded-lg border border-dashed border-gray-300 cursor-pointer hover:bg-gray-50 transition-colors duration-150",children:[e("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e("span",{className:"mt-2 text-sm text-gray-600",children:n.pesantren_certificate_file?n.pesantren_certificate_file.name:"Pilih File"}),e("input",{type:"file",name:"pesantren_certificate_file",onChange:y("pesantren_certificate_file"),className:"hidden",accept:".pdf"})]})}),r.pesantren_certificate_file&&e("p",{className:"mt-1 text-sm text-red-600",children:r.pesantren_certificate_file})]})]})]}),e("div",{className:"flex justify-end pt-6 border-t border-gray-200",children:e("button",{type:"submit",disabled:v,className:`inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-[#4CAF50] hover:bg-[#259148] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4CAF50] transition-colors duration-200 ${v?"opacity-75 cursor-not-allowed":""}`,children:v?t(B,{children:[t("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Memproses..."]}):"Daftar Sekarang"})})]})]})})})})]})}export{V as default};
