import{r as m,a as r,j as e,S as F,F as B,A as u}from"./app-15b6aeb1.js";import{A as M}from"./AuthenticatedLayout-8230a9e8.js";import{r as v,F as z,s as L,t as P,c as g,q,h as $,u as H,v as f}from"./index-87669fcf.js";import{M as K}from"./Modal-d468c244.js";import{B as h}from"./Button-f3965ee7.js";import"./Toater-82e9cfd1.js";import"./index-c69c1dde.js";import"./index-b4a58151.js";import"./proxy-f7effb66.js";function O({admins:k,categories:c,auth:T}){const[i,w]=m.useState(null),[l,b]=m.useState([]),[C,o]=m.useState(!1),[s,n]=m.useState({name:"",email:"",password:"",password_confirmation:"",category_ids:[]}),[d,A]=m.useState(""),y=k.filter(a=>a.name.toLowerCase().includes(d.toLowerCase())||a.email.toLowerCase().includes(d.toLowerCase())),N=(a,p=!1)=>{p?n(t=>({...t,category_ids:t.category_ids.includes(a)?t.category_ids.filter(x=>x!==a):[...t.category_ids,a]})):b(t=>t.includes(a)?t.filter(x=>x!==a):[...t,a])},S=a=>{a.preventDefault(),u.post("/super-admin/admin-access/create",s,{preserveScroll:!0,onSuccess:()=>{o(!1),n({name:"",email:"",password:"",password_confirmation:"",category_ids:[]}),u.reload({only:["admins"]})}})},_=a=>{w(a),b(a.managed_categories.map(p=>p.id))},j=()=>{i&&u.post("/super-admin/admin-access",{admin_id:i.id,category_ids:l},{preserveScroll:!0,onSuccess:()=>{u.reload({only:["admins"]})}})};return r(M,{children:[e(F,{title:"Manajemen Hak Akses Admin"}),e("div",{className:"",children:r("div",{className:"",children:[r("div",{className:"mb-8 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r("div",{children:[r("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e(v,{className:"mr-2 text-green-500"}),"Manajemen Hak Akses Admin"]}),e("p",{className:"mt-1 text-sm text-gray-600",children:"Atur kategori apa saja yang bisa diakses oleh masing-masing admin"})]}),r("div",{className:"flex items-center gap-3",children:[r("div",{className:"relative",children:[e("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e(z,{className:"text-gray-400"})}),e("input",{type:"text",placeholder:"Cari admin...",value:d,onChange:a=>A(a.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 sm:text-sm"})]}),e(h,{onClick:()=>o(!0),variant:"primary",size:"medium",icon:L,children:"Tambah Admin"})]})]}),e("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:r("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-0 lg:gap-6",children:[e("div",{className:"lg:col-span-1 border-r border-gray-200",children:r("div",{className:"p-6",children:[r("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e(P,{className:"mr-2 text-green-500"}),"Daftar Admin"]}),y.length===0?r("div",{className:"text-center py-8",children:[e(g,{className:"mx-auto h-12 w-12 text-gray-400"}),e("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:d?"Admin tidak ditemukan":"Belum ada admin"}),e("p",{className:"mt-1 text-sm text-gray-500",children:d?"Coba dengan kata kunci lain":"Buat admin baru untuk memulai"})]}):e("ul",{className:"space-y-2",children:y.map(a=>e("li",{children:e("button",{onClick:()=>_(a),className:`w-full text-left p-4 rounded-lg transition-all duration-200 flex justify-between items-center ${(i==null?void 0:i.id)===a.id?"bg-green-50 border border-green-200":"hover:bg-gray-50 border border-transparent"}`,children:r("div",{children:[e("h3",{className:"font-medium text-gray-900",children:a.name}),r("p",{className:"text-sm text-gray-500 flex items-center mt-1",children:[e(q,{className:"mr-1",size:14}),a.email]}),r("div",{className:"flex items-center mt-3",children:[r("span",{className:"text-xs font-medium px-2 py-1 bg-green-100 text-green-800 rounded-full",children:[a.managed_categories.length," ","Kategori"]}),e($,{className:"ml-2 text-gray-400"})]})]})})},a.id))})]})}),e("div",{className:"lg:col-span-2",children:e("div",{className:"p-6",children:i?r(B,{children:[r("div",{className:"flex justify-between items-center mb-6",children:[r("h2",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e(g,{className:"mr-2 text-green-500"}),"Hak Akses untuk"," ",i.name]}),r("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[l.length," ","kategori dipilih"]})]}),e("div",{className:"space-y-4",children:c.length===0?r("div",{className:"text-center py-8",children:[e(H,{className:"mx-auto h-12 w-12 text-gray-400"}),e("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Belum ada kategori"}),e("p",{className:"mt-1 text-sm text-gray-500",children:"Buat kategori terlebih dahulu untuk mengatur hak akses"})]}):e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(a=>e("div",{className:`p-4 rounded-lg border transition-all duration-200 cursor-pointer ${l.includes(a.id)?"border-green-300 bg-green-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>N(a.id),children:r("div",{className:"flex items-center",children:[e("div",{className:`flex-shrink-0 h-5 w-5 rounded-full flex items-center justify-center ${l.includes(a.id)?"bg-green-600 text-white":"bg-gray-200 text-transparent"}`,children:e(f,{size:12})}),r("span",{className:"ml-3 block text-sm text-center font-medium text-gray-900",children:[a.name," -  ",a.competition.name]})]})},a.id))})}),e("div",{className:"mt-8 flex justify-end",children:e(h,{onClick:j,disabled:!l.length,variant:"primary",size:"large",icon:f,className:"min-w-[180px]",children:"Simpan Perubahan"})})]}):r("div",{className:"text-center py-12",children:[e(g,{className:"mx-auto h-12 w-12 text-gray-400"}),e("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Pilih admin terlebih dahulu"}),e("p",{className:"mt-1 text-sm text-gray-500",children:"Klik pada nama admin di daftar sebelah kiri untuk mengatur hak akses"})]})})})]})})]})}),e(K,{show:C,onClose:()=>o(!1),title:"Tambah Admin Baru",maxWidth:"2xl",children:r("form",{onSubmit:S,className:"space-y-6",children:[r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r("div",{className:"space-y-4",children:[r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap*"}),e("input",{type:"text",value:s.name,onChange:a=>n({...s,name:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email*"}),e("input",{type:"email",value:s.email,onChange:a=>n({...s,email:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password*"}),e("input",{type:"password",value:s.password,onChange:a=>n({...s,password:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0})]}),r("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konfirmasi Password*"}),e("input",{type:"password",value:s.password_confirmation,onChange:a=>n({...s,password_confirmation:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0})]})]}),r("div",{className:"space-y-4",children:[r("h3",{className:"text-md font-medium text-gray-900",children:[e(v,{className:"inline mr-2 text-green-500"}),"Hak Akses Kategori"]}),e("p",{className:"text-sm text-gray-500",children:"Pilih kategori yang bisa diakses oleh admin ini"}),e("div",{className:"space-y-2 max-h-60 overflow-y-auto p-3 border border-gray-200 rounded-lg",children:c.length===0?e("p",{className:"text-sm text-gray-500 text-center py-4",children:"Belum ada kategori tersedia"}):c.map(a=>e("div",{className:`p-3 rounded-md cursor-pointer transition-colors ${s.category_ids.includes(a.id)?"bg-green-50 border border-green-200":"hover:bg-gray-50 border border-transparent"}`,onClick:()=>N(a.id,!0),children:r("div",{className:"flex items-center",children:[e("div",{className:`flex-shrink-0 h-5 w-5 rounded-full flex items-center justify-center ${s.category_ids.includes(a.id)?"bg-green-600 text-white":"bg-gray-200 text-transparent"}`,children:e(f,{size:12})}),e("span",{className:"ml-3 block text-sm font-medium text-gray-900",children:a.name})]})},a.id))})]})]}),r("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 mt-6",children:[e(h,{onClick:()=>o(!1),variant:"secondary",size:"medium",children:"Batal"}),e(h,{type:"submit",variant:"primary",size:"medium",icon:g,children:"Buat Admin"})]})]})})]})}export{O as default};
