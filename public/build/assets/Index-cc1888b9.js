import{X as f,r as y,a as t,j as e,S as b,F as N,x as v,A as i}from"./app-37a05af3.js";import{A as w}from"./AuthenticatedLayout-b2ab0c87.js";import{F as _,a as m,b as k,c as S,d as P,e as l,f as j,g as C,h as F}from"./index-ff3f98e8.js";import"./Toater-9ddae612.js";function L({auth:p}){const{registrations:s,meta:a}=f().props,[d,g]=y.useState(""),h=r=>{switch(r){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},u=(r,n)=>{i.put(`/admin/registrations/${r}`,{status:n},{preserveScroll:!0,onSuccess:()=>{}})},c=()=>{a.current_page>1&&i.get(`/admin/registrations?page=${a.current_page-1}`,{},{preserveState:!0,preserveScroll:!0})},o=()=>{a.current_page<a.last_page&&i.get(`/admin/registrations?page=${a.current_page+1}`,{},{preserveState:!0,preserveScroll:!0})},x=s==null?void 0:s.filter(r=>r.user_name.toLowerCase().includes(d.toLowerCase()));return t(w,{auth:p,children:[e(b,{title:"Kelola Pendaftaran"}),e("div",{className:"",children:t("div",{className:"",children:[e("div",{className:"mb-6 flex justify-between items-center",children:t("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-900",children:"Kelola Pendaftaran"}),e("p",{className:"mt-1 text-sm text-gray-600",children:"Review dan kelola semua pendaftaran peserta kompetisi"})]})}),t("div",{className:"mb-4 relative",children:[e("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e(_,{className:"text-gray-400"})}),e("input",{type:"text",placeholder:"Cari Pendaftar",value:d,onChange:r=>g(r.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 sm:text-sm"})]}),s.length===0?t("div",{className:"bg-white rounded-xl shadow-md p-8 text-center",children:[e("div",{className:"mx-auto h-24 w-24 text-gray-400 mb-4",children:e(m,{className:"w-full h-full"})}),e("h3",{className:"text-lg font-medium text-gray-900",children:"Belum ada pendaftaran"}),e("p",{className:"mt-2 text-gray-500",children:"Tidak ada pendaftaran untuk kategori yang Anda kelola saat ini."})]}):t(N,{children:[e("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-4",children:e("div",{className:"overflow-x-auto",children:t("table",{className:"min-w-full divide-y divide-gray-200",children:[e("thead",{className:"bg-gray-50",children:t("tr",{children:[e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Peserta"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kompetisi & Kategori"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dokumen"}),e("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),e("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(r=>t("tr",{className:"hover:bg-gray-50 transition-colors",children:[e("td",{className:"px-6 py-4",children:t("div",{className:"flex items-center",children:[e("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-green-100 flex items-center justify-center text-green-600",children:e(k,{size:20})}),t("div",{className:"ml-4",children:[e("div",{className:"font-medium text-gray-900",children:r.user_name}),t("div",{className:"text-sm text-gray-500 flex items-center",children:[e(S,{className:"mr-1",size:14}),r.number_wa]})]})]})}),t("td",{className:"px-6 py-4",children:[t("div",{className:"font-medium text-gray-900 flex items-center",children:[e(m,{className:"mr-2 text-green-500"}),r.competition_name]}),t("div",{className:"text-sm text-gray-500 flex items-center mt-1",children:[e(P,{className:"mr-2 text-purple-500"}),r.category_name]})]}),e("td",{className:"px-6 py-4",children:t("div",{className:"flex flex-col space-y-2",children:[t("a",{href:`${r.business_proposal_file}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-600 hover:text-green-800 flex items-center",children:[e(l,{className:"mr-1",size:14}),"Proposal Bisnis"]}),t("a",{href:`${r.mustahik_certificate_file}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-600 hover:text-green-800 flex items-center",children:[e(l,{className:"mr-1",size:14}),"Sertifikat Mustahik"]}),t("a",{href:`${r.pesantren_certificate_file}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-600 hover:text-green-800 flex items-center",children:[e(l,{className:"mr-1",size:14}),"Sertifikat Pesantren"]})]})}),e("td",{className:"px-6 py-4",children:e("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${h(r.status)}`,children:r.status==="approved"?"Disetujui":r.status==="rejected"?"Ditolak":"Menunggu"})}),e("td",{className:"px-6 py-4 text-right",children:t("div",{className:"flex justify-end space-x-2",children:[e(v,{href:`/admin/registrations/${r.id}`,className:"p-2 text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"Lihat Detail",children:e(j,{size:18})}),t("select",{value:r.status,onChange:n=>u(r.id,n.target.value),className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm text-sm py-1 pl-2 pr-8",children:[e("option",{value:"pending",children:"Pending"}),e("option",{value:"approved",children:"Approved"}),e("option",{value:"rejected",children:"Rejected"})]})]})})]},r.id))})]})})}),t("div",{className:"flex items-center justify-between bg-white px-4 py-3 rounded-b-lg border-t border-gray-200",children:[t("div",{className:"flex-1 flex justify-between sm:hidden",children:[e("button",{onClick:c,disabled:a.current_page===1,className:`relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md ${a.current_page===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Previous"}),e("button",{onClick:o,disabled:a.current_page===a.last_page,className:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md ${a.current_page===a.last_page?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Next"})]}),t("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e("div",{children:t("p",{className:"text-sm text-gray-700",children:["Showing"," ",e("span",{className:"font-medium",children:(a.current_page-1)*a.per_page+1})," ","to"," ",e("span",{className:"font-medium",children:Math.min(a.current_page*a.per_page,a.total)})," ","of"," ",e("span",{className:"font-medium",children:a.total})," ","results"]})}),e("div",{children:t("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[t("button",{onClick:c,disabled:a.current_page===1,className:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium ${a.current_page===1?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50"}`,children:[e("span",{className:"sr-only",children:"Previous"}),e(C,{className:"h-5 w-5","aria-hidden":"true"})]}),t("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:["Page ",a.current_page," of"," ",a.last_page]}),t("button",{onClick:o,disabled:a.current_page===a.last_page,className:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium ${a.current_page===a.last_page?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50"}`,children:[e("span",{className:"sr-only",children:"Next"}),e(F,{className:"h-5 w-5","aria-hidden":"true"})]})]})})]})]})]})]})})]})}export{L as default};
