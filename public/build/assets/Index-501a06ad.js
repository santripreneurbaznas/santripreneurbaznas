import{r as c,G as x,a as t,j as a,S as T}from"./app-56c9d2f2.js";import{A}from"./AuthenticatedLayout-9fc0149e.js";import{r as b,b as q,v as L,w as P,i as W,x as v,y,z as N,A as $}from"./index-898b42bf.js";import{M as C}from"./Modal-17099f00.js";import{B as n}from"./Button-afa82a34.js";import"./Toater-c262cea3.js";import"./index-825608d7.js";import"./index-06a76492.js";import"./proxy-47b6e68f.js";function X({auth:k,competitions:u}){const[w,l]=c.useState(!1),[_,d]=c.useState(!1),[o,g]=c.useState(null),[m,p]=c.useState(null),[h,S]=c.useState([]),r=x({name:"",description:"",competition_id:""}),s=x({name:"",description:"",start_date:"",end_date:""}),D=e=>{S(i=>i.includes(e)?i.filter(E=>E!==e):[...i,e])},K=e=>{e.preventDefault(),o?r.put(route("superadmin.categories.update",o.id),{onSuccess:()=>{l(!1),g(null)}}):r.post(route("superadmin.categories.store"),{onSuccess:()=>{l(!1)}})},z=e=>{e.preventDefault(),m?s.put(route("superadmin.competitions.update",m.id),{onSuccess:()=>{d(!1),p(null)}}):s.post(route("superadmin.competitions.store"),{onSuccess:()=>{d(!1)}})},B=e=>{g(e),r.setData({name:e.name,description:e.description,competition_id:e.competition_id}),l(!0)},F=e=>{p(e),s.setData({name:e.name,description:e.description,start_date:e.start_date,end_date:e.end_date}),d(!0)},j=e=>{r.patch(route("superadmin.categories.toggle-status",e.id))},M=e=>{s.patch(route("superadmin.competitions.toggle-status",e.id))},f=e=>{const i={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString("id-ID",i)};return t(A,{user:k.user,children:[a(T,{title:"Management Kompetisi & Kategori"}),a("div",{className:"min-h-screen",children:t("div",{className:"",children:[t("div",{className:"mb-8 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t("div",{children:[a("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:"Manajemen Kompetisi & Kategori"}),a("p",{className:"mt-1 text-sm text-gray-600",children:"Kelola semua kompetisi dan kategori yang tersedia"})]}),a(n,{onClick:()=>{p(null),s.reset(),d(!0)},variant:"primary",size:"medium",icon:b,children:"Tambah Kompetisi"})]}),a("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:u.length===0?t("div",{className:"p-8 text-center",children:[a(q,{className:"mx-auto h-12 w-12 text-gray-400"}),a("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Belum ada kompetisi"}),a("p",{className:"mt-1 text-sm text-gray-500",children:"Buat kompetisi baru untuk memulai"})]}):a("ul",{className:"divide-y divide-gray-200",children:u.map(e=>a("li",{className:"hover:bg-gray-50 transition-colors",children:t("div",{className:"px-6 py-4",children:[t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center",children:[a("button",{onClick:()=>D(e.id),className:"mr-3 text-gray-400 hover:text-gray-600",children:h.includes(e.id)?a(L,{size:20}):a(P,{size:20})}),t("div",{children:[t("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.name,a("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.is_active?"Aktif":"Nonaktif"})]}),t("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[a(W,{className:"mr-1",size:14}),f(e.start_date)," ","-"," ",f(e.end_date)]})]})]}),t("div",{className:"flex space-x-2",children:[a(n,{onClick:()=>F(e),variant:"secondary",size:"small",icon:v,children:"Edit"}),a(n,{onClick:()=>M(e),variant:e.is_active?"danger":"success",size:"small",icon:e.is_active?y:N,children:e.is_active?"Nonaktifkan":"Aktifkan"})]})]}),h.includes(e.id)&&t("div",{className:"mt-4 pl-9",children:[t("div",{className:"flex justify-between items-center mb-3",children:[t("h4",{className:"text-md font-medium flex items-center",children:[a($,{className:"mr-2 text-blue-500"}),"Daftar Kategori"]}),a(n,{onClick:()=>{g(null),r.reset(),r.setData("competition_id",e.id),l(!0)},variant:"primary",size:"small",icon:b,children:"Tambah Kategori"})]}),e.categories.length===0?a("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:a("p",{className:"text-sm text-gray-500",children:"Belum ada kategori untuk kompetisi ini"})}):a("div",{className:"space-y-2",children:e.categories.map(i=>t("div",{className:"bg-gray-50 p-4 rounded-lg flex justify-between items-center",children:[t("div",{children:[a("h5",{className:"font-medium text-gray-900",children:i.name}),i.description&&a("p",{className:"text-sm text-gray-600 mt-1",children:i.description}),a("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium mt-1 ${i.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i.is_active?"Aktif":"Nonaktif"})]}),t("div",{className:"flex space-x-2",children:[a(n,{onClick:()=>B(i),variant:"secondary",size:"small",icon:v}),a(n,{onClick:()=>j(i),variant:i.is_active?"danger":"success",size:"small",icon:i.is_active?y:N})]})]},i.id))})]})]})},e.id))})})]})}),a(C,{show:w,onClose:()=>l(!1),title:o?"Edit Kategori":"Tambah Kategori Baru",maxWidth:"lg",children:t("form",{onSubmit:K,className:"space-y-4",children:[t("div",{children:[a("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Kategori*"}),a("input",{type:"text",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:r.data.name,onChange:e=>r.setData("name",e.target.value),required:!0})]}),t("div",{children:[a("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deskripsi"}),a("textarea",{className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:r.data.description,onChange:e=>r.setData("description",e.target.value),rows:3})]}),!o&&t("div",{children:[a("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kompetisi*"}),t("select",{className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:r.data.competition_id,onChange:e=>r.setData("competition_id",e.target.value),required:!0,children:[a("option",{value:"",children:"Pilih Kompetisi"}),u.map(e=>a("option",{value:e.id,children:e.name},e.id))]})]}),t("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 mt-6",children:[a(n,{onClick:()=>l(!1),variant:"secondary",size:"medium",children:"Batal"}),a(n,{type:"submit",variant:"primary",size:"medium",disabled:r.processing,children:o?"Simpan Perubahan":"Buat Kategori"})]})]})}),a(C,{show:_,onClose:()=>d(!1),title:m?"Edit Kompetisi":"Tambah Kompetisi Baru",maxWidth:"2xl",children:t("form",{onSubmit:z,className:"space-y-4",children:[t("div",{className:"grid grid-cols-1 gap-4",children:[t("div",{children:[a("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Kompetisi*"}),a("input",{type:"text",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:s.data.name,onChange:e=>s.setData("name",e.target.value),required:!0})]}),t("div",{children:[a("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deskripsi*"}),a("textarea",{className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:s.data.description,onChange:e=>s.setData("description",e.target.value),rows:3,required:!0})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t("div",{children:[a("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Mulai*"}),a("input",{type:"datetime-local",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:s.data.start_date,onChange:e=>s.setData("start_date",e.target.value),required:!0})]}),t("div",{children:[a("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Berakhir*"}),a("input",{type:"datetime-local",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:s.data.end_date,onChange:e=>s.setData("end_date",e.target.value),required:!0})]})]})]}),t("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 mt-6",children:[a(n,{onClick:()=>d(!1),variant:"secondary",size:"medium",children:"Batal"}),a(n,{type:"submit",variant:"primary",size:"medium",disabled:s.processing,children:m?"Simpan Perubahan":"Buat Kompetisi"})]})]})})]})}export{X as default};
